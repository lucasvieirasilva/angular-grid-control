"use strict";angular.module("template/grid",[]).run(["$templateCache",function(a){a.put("template/grid/pagination-grid.html",'<div>\n\r <div>\n\r   <table ng-class="ctrl.tableClass" class="table">\n\r       <thead>\n\r           <tr>\n\r                <th ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top grid-control-column-check-box ">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>\n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="ctrl.checkBoxAllModel" ng-change="ctrl.checkBoxSelectAll()">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r                </th>\n\r                <th ng-style="{\'width\' : col.width ? col.width : \'auto\'}" class="col-lg-5 vertical-align-top" ng-repeat="col in ctrl.columns">\n\r                   <span class="col-xs-12 no-padding "><i ng-if="col.icon" ng-class="col.icon"></i> {{ col.displayName | translate }}</span> \n\r                   <div class="margin-top-10 input-group" ng-if="col.filter && (col.filterType && col.filterType != \'date\')">\n\r                         <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>\n\r                         <input class="form-control input-sm" type="search" ng-change="ctrl.searchData(col.filterValue)"  ng-model="col.filterValue" />\n\r                   </div>\n\r                   <div ng-if="col.filter && (col.filterType && col.filterType == \'date\')" class="input-group" ng-controller="gridControlDatePickerCtrl"><input type="text" class="form-control" show-button-bar="false" ng-change="ctrl.searchData(col.filterValue)" uib-datepicker-popup="{{format}}" ng-model="$parent.col.filterValue" is-open="opened" datepicker-options="Options" close-text="Close" />\n\r                      <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="open($event)">\n\r                          <i class="glyphicon glyphicon-calendar"></i></button></span></div>\n\r                </th>\n\r           </tr>\n\r       </thead>\n\r       <tbody>\n\r           <tr ng-repeat="row in ctrl.data" ng-click="ctrl.select(row)" ng-class="ctrl.rowCssClass(row)">\n\r                <td ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top  grid-control-column-check-box">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>\n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="row[ctrl.checkboxField]" ng-change="ctrl.checkBoxSelection(row)">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r                </td>\n\r               <td ng-repeat="col in ctrl.columns">\n\r                   <span ng-if="col.cellTemplate" gc-compile="col.cellTemplate" cell-template-scope="col.cellTemplateScope"></span>\n\r                   <span ng-if="!col.cellTemplate">{{row[col.field]}}</span>\n\r               </td>\n\r           </tr>\n\r       </tbody>\n\r   </table>\n\r   </div>\n\r   <div ng-show="ctrl.showPagination" class="grid-control-text-align-center grid-control-margin-top-20 grid-control-pagination-greed" >\n\r         <div ng-if="params.options.pagination.useItemsPerPage == true || params.options.pagination.useItemsPerPage == undefined" class="grid-control-floatLeft grid-control-number-pagination">\n\r             <span>{{ ctrl.itemsPerPageText }}: </span>\n\r             <select name="pageSize" id="pageSize" ng-options="option as option for option in ctrl.pageSizes" ng-model="ctrl[ctrl.pagingInfoProperty][ctrl.pageSizeProperty]"></select>\n\r         </div>\n\r         <ul uib-pagination ng-model="ctrl[ctrl.pagingInfoProperty][ctrl.pageIndexProperty]" total-items="ctrl[ctrl.pagingInfoProperty][ctrl.totalCountProperty]" items-per-page="ctrl[ctrl.pagingInfoProperty][ctrl.pageSizeProperty]" max-size="5" boundary-links="true" previous-text="{{ ctrl.previousText }}" next-text="{{ ctrl.nextText }}" first-text="{{ ctrl.firstText }}" last-text="{{ ctrl.lastText }}">\n\r         </ul>\n\r   </div>\n</div>'),a.put("template/grid/simple-grid.html",'<div>\n\r   <table ng-class="ctrl.tableClass" class="table">\n\r       <thead>\n\r           <tr>\n\r                <th ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top grid-control-column-check-box ">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>\n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="ctrl.checkBoxAllModel" ng-change="ctrl.checkBoxSelectAll()">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r                </th>\n\r                <th ng-style="{\'width\' : col.width ? col.width : \'auto\'}" class="col-lg-5 vertical-align-top" ng-repeat="col in ctrl.columns">\n\r                   <span><i ng-if="col.icon" ng-class="col.icon"></i> {{ col.displayName | translate }}</span>\n\r                </th>\n\r           </tr>\n\r       </thead>\n\r       <tbody>\n\r           <tr ng-repeat="row in ctrl.data" ng-click="ctrl.select(row)" ng-class="ctrl.rowCssClass(row)">\n\r                <td ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top  grid-control-column-check-box">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>\n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="row[ctrl.checkboxField]" ng-change="ctrl.checkBoxSelection(row)">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r                </td>\n\r               <td ng-repeat="col in ctrl.columns">\n\r                   <span ng-if="col.cellTemplate" gc-compile="col.cellTemplate" cell-template-scope="col.cellTemplateScope"></span>\n\r                   <span ng-if="!col.cellTemplate">{{row[col.field]}}</span>\n\r               </td>\n\r           </tr>\n\r       </tbody>\n\r   </table>\n</div>'),a.put("template/grid/scroll-grid.html",'<div class="table-scrollable" ng-style="{ height: ctrl.height ? ctrl.height : \'auto\' }">\n\r <div>\n\r   <table ng-class="ctrl.tableClass"  class="table">\n\r       <thead>\n\r           <tr>\n\r                <th ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top grid-control-column-check-box ">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>                           \n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="ctrl.checkBoxAllModel" ng-change="ctrl.checkBoxSelectAll()">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r                </th>\n\r                <th ng-style="{\'width\' : col.width ? col.width : \'auto\'}" class="col-lg-5 vertical-align-top" ng-repeat="col in ctrl.columns">\n\r                   <span class="margin-bottom-10 col-xs-12 no-padding "><i ng-if="col.icon" ng-class="col.icon"></i> {{ col.displayName | translate }}</span> \n\r                </th>\n\r           </tr>\n\r       </thead>\n\r       <tbody>\n\r           <tr ng-repeat="row in ctrl.data" ng-click="ctrl.select(row)" ng-class="ctrl.rowCssClass(row)">\n\r                <td ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top  grid-control-column-check-box">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">              \n\r\t\t\t\t\t\t    <label>                           \n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="row[ctrl.checkboxField]" ng-change="ctrl.checkBoxSelection(row)">     \n\r\t\t\t\t\t\t        <span class="text"></span>  \n\r\t\t\t\t\t\t    </label>                          \n\r\t\t\t\t\t\t</div>                                \n\r                </td>\n\r               <td ng-repeat="col in ctrl.columns">\n\r                   <span ng-if="col.cellTemplate" gc-compile="col.cellTemplate" cell-template-scope="col.cellTemplateScope"></span>\n\r                   <span ng-if="!col.cellTemplate">{{row[col.field]}}</span>\n\r               </td>\n\r           </tr>\n\r       </tbody>\n\r   </table>\n\r   </div>\n</div>'),a.put("template/grid/vs-simple-grid.html",'<div class="vs-table-scroll">\n\r   <table ng-class="ctrl.tableClass" class="table">\n\r       <thead>\n\r           <tr>\n\r                <th ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top grid-control-column-check-box">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>\n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="ctrl.checkBoxAllModel" ng-change="ctrl.checkBoxSelectAll()">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r                </th>\n\r                <th ng-style="{\'width\' : col.width ? col.width : \'auto\'}" class="col-lg-5 vertical-align-top" ng-repeat="col in ctrl.columns">\n\r                   <span><i ng-if="col.icon" ng-class="col.icon"></i> {{ col.displayName | translate }}</span>\n\r                </th>\n\r           </tr>\n\r       </thead>\n\r       <tbody vs-repeat vs-scroll-parent=".vs-table-scroll">\n\r           <tr ng-repeat="row in ctrl.data" ng-click="ctrl.select(row)" ng-class="ctrl.rowCssClass(row)">\n\r                <td ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top grid-control-column-check-box">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>\n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="row[ctrl.checkboxField]" ng-change="ctrl.checkBoxSelection(row)">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r               </td>\n\r               <td ng-repeat="col in ctrl.columns">\n\r                   <span ng-if="col.cellTemplate" gc-compile="col.cellTemplate" cell-template-scope="col.cellTemplateScope"></span>\n\r                   <span ng-if="!col.cellTemplate">{{row[col.field]}}</span>\n\r               </td>\n\r           </tr>\n\r       </tbody>\n\r   </table>\n</div>')}]),angular.module("angular-grid-control",["template/grid"]).directive("gcCompile",["$compile",function(a){return{restrict:"EA",link:function(b,c,d){b.cellTemplateScope=b.$eval(d.cellTemplateScope),b.$watch(d.gcCompile,function(d){var e=a(d),f=e(b);c.append(f)})}}}]).directive("gcSimple",function(){return{restrict:"E",templateUrl:function(a,b){return b.templateUrl||"template/grid/simple-grid.html"},scope:{params:"=",selectedItem:"=",onSelect:"="},controller:"gridControlController",controllerAs:"ctrl",link:function(a,b,c){}}}).directive("gcVsSimple",function(){return{restrict:"E",templateUrl:function(a,b){return b.templateUrl||"template/grid/vs-simple-grid.html"},scope:{params:"=",selectedItem:"=",onSelect:"="},controller:"gridControlController",controllerAs:"ctrl",link:function(a,b,c){}}}).directive("gcPagination",["$q",function(a){return{restrict:"E",templateUrl:function(a,b){return b.templateUrl||"template/grid/pagination-grid.html"},scope:{params:"=",selectedItem:"=",onSelect:"="},controller:"gridControlController",controllerAs:"ctrl",link:function(a,b,c){}}}]).directive("gcScroll",["$q",function(a){return{restrict:"E",replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/grid/scroll-grid.html"},scope:{params:"=",selectedItem:"=",onSelect:"="},controller:"gridControlController",controllerAs:"ctrl",link:function(a,b,c){var d=b[0];b.bind("scroll",function(b){d.scrollTop+d.offsetHeight>d.scrollHeight&&!a.ctrl.gettingMore&&a.ctrl.getMore()})}}}]).controller("gridControlController",["$scope","$q","$element",function(a,b,c){var d=this;d.data=[],d.height=null,d.tableClass="table-striped table-bordered table-hover",a.params.data&&(d.data=a.params.data),a.params.options&&a.params.options.tableClass&&(d.tableClass=a.params.options.tableClass),a.params.options&&a.params.options.height&&(d.height=a.params.options&&a.params.options.height),d.columns=a.params.columns;var e=!1;if(d.select=function(b){a.params.selection&&(a.params.selectedItem=b,a.$emit("gridControl:selectItem",b),a.onSelect instanceof Function&&a.onSelect(b))},d.error=function(b){return!(!a.params.callbacks||!a.params.callbacks.error)&&a.params.callbacks.error(b)},d.warning=function(b){return!(!a.params.callbacks||!a.params.callbacks.warning)&&a.params.callbacks.warning(b)},d.searchData=function(a){e=!0,d.buildData().then(function(a){e=!1}).catch(function(a){e=!1})},d.rowCssClass=function(b){return{danger:d.error(b),warning:d.warning(b),"cursor-pointer":a.params.selection,"grid-control-item-selected":d.isSelected(b)}},d.isSelected=function(b){return a.params.selectedItem==b},a.params.update=function(a){d.buildData(a)},d.buildData=function(){var c=b.defer();return d.getData=a.params.data,a.params.options&&a.params.options.async?d.getData().then(function(a){d.data=a,c.resolve(a)}).catch(function(a){c.reject(a)}):(d.data=d.getData(),c.resolve(d.data)),c.promise},a.params.options&&"pagination"==a.params.options.type){d.itemsPerPageText="Items per page",d.previousText="Previous",d.nextText="Next",d.lastText="Last",d.firstText="First",d.pagingInfoProperty="pagingInfo",d.pageSizeProperty="pageSize",d.pageIndexProperty="pageIndex",d.totalCountProperty="totalCount",d.hasNextPageProperty="hasNextPage",d.hasPreviousPageProperty="hasPreviousPage",d.itemsProperty="items",a.params.options&&a.params.options.pagination&&(a.params.options.pagination.itemsPerPageText&&(d.itemsPerPageText=a.params.options.pagination.itemsPerPageText),a.params.options.pagination.firstText&&(d.firstText=a.params.options.pagination.firstText),a.params.options.pagination.lastText&&(d.lastText=a.params.options.pagination.lastText),a.params.options.pagination.nextText&&(d.nextText=a.params.options.pagination.nextText),a.params.options.pagination.previousText&&(d.previousText=a.params.options.pagination.previousText),a.params.options.pagination.pagingInfoProperty&&(d.pagingInfoProperty=a.params.options.pagination.pagingInfoProperty),a.params.options.pagination.pageSizeProperty&&(d.pageSizeProperty=a.params.options.pagination.pageSizeProperty),a.params.options.pagination.pageIndexProperty&&(d.pageIndexProperty=a.params.options.pagination.pageIndexProperty),a.params.options.pagination.totalCountProperty&&(d.totalCountProperty=a.params.options.pagination.totalCountProperty),a.params.options.pagination.hasPreviousPageProperty&&(d.hasPreviousPageProperty=a.params.options.pagination.hasPreviousPageProperty),a.params.options.pagination.hasNextPageProperty&&(d.hasNextPageProperty=a.params.options.pagination.hasNextPageProperty),a.params.options.pagination.itemsProperty&&(d.itemsProperty=a.params.options.pagination.itemsProperty)),d.showPagination=!0,d.getData=a.params.data,d.pageSizes=[5,10,15,20,25,30,50,100],d[d.pagingInfoProperty]={},d[d.pagingInfoProperty][d.pageIndexProperty]=1,a.params.options&&a.params.options.pagination&&a.params.options.pagination.pageSize?d[d.pagingInfoProperty][d.pageSizeProperty]=a.params.options.pagination.pageSize:a.params.options&&a.params.options.pagination&&!a.params.options.pagination.useItemsPerPage&&(d[d.pagingInfoProperty][d.pageSizeProperty]=d.pageSizes[0]),a.$watch("ctrl[ctrl.pagingInfoProperty][ctrl.pageIndexProperty] + ctrl[ctrl.pagingInfoProperty][ctrl.pageSizeProperty]",function(){e||(a.$emit("gridControl:beforePageChanged"),d.buildData().then(function(){a.$emit("gridControl:afterPageChanged")}))});var f=function(a){a[d.pagingInfoProperty][d.pageIndexProperty]+=1,d.data=a[d.itemsProperty],d[d.pagingInfoProperty]=a[d.pagingInfoProperty],d.showPagination=d[d.pagingInfoProperty][d.hasNextPageProperty]||d[d.pagingInfoProperty][d.hasPreviousPageProperty]};d.buildData=function(c){var e=b.defer(),g={};if(g[d.pagingInfoProperty]=angular.copy(d[d.pagingInfoProperty]),g[d.pagingInfoProperty][d.pageIndexProperty]-=1,!0===c&&(g[d.pagingInfoProperty][d.pageIndexProperty]=0),d.columns.forEach(function(a){a.filter&&(g[a.field]=a.filterValue)}),d.checkBoxAllModel=!1,a.params.options&&a.params.options.async)d.getData(g).then(function(b){f(b),a.params.currentData=d.data,e.resolve(b)}).catch(function(a){e.reject(a)});else{var h=d.getData(g);f(h),e.resolve(h)}return e.promise}}else if(a.params.options&&"scroll"==a.params.options.type){d.height||(d.height="300px"),d.getMore=function(){d.gettingMore=!0,d.buildData().finally(function(){d.gettingMore=!1})};var g=function(a){Array.isArray(d.data)||(d.data=[]),d.data=d.data.concat(a)};d.buildData=function(){var c=b.defer();if(d.getData=a.params.data,a.params.options&&a.params.options.async)d.getData().then(function(a){g(a),c.resolve(d.data)}).catch(function(a){c.reject(a)});else{var e=d.getData();g(e),c.resolve(d.data)}return c.promise},d.buildData()}else a.$watch("params.data",function(a){a&&(d.data=a)});a.params.options&&a.params.options.checkbox&&(d.checkboxField=a.params.options.checkboxField,d.checkboxField||(d.checkboxField="selected"),d.checkbox=a.params.options.checkbox,d.checkBoxSelection=function(a){var b=d.checkBoxAllModel;if(b&&!a[d.checkboxField])d.checkBoxAllModel=a[d.checkboxField];else if(!b&&d.data){var c=!0;d.data.forEach(function(a){a[d.checkboxField]||(c=!1)}),c&&(d.checkBoxAllModel=c)}},d.checkBoxSelectAll=function(){var a=d.checkBoxAllModel;d.data&&d.data.forEach(function(b){b[d.checkboxField]=a})})}]).controller("gridControlDatePickerCtrl",["$scope",function(a){a.formatDate=function(a){var b=function(a){return("0"+a).slice(-2)},c=b(a.getDate());return[b(a.getMonth()),c,a.getFullYear()].join("/")},a.today=new Date,a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.format="dd/MM/yyyy",a.Options={startingDay:1}}]);
//# sourceMappingURL=angular-grid-control.min.js.map