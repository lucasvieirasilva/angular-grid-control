"use strict";angular.module("template/grid",[]).run(["$templateCache",function(a){a.put("template/grid/pagination-grid.html",'<div>\n\r <div>\n\r   <table class="table table-striped table-bordered table-hover">\n\r       <thead>\n\r           <tr>\n\r                <th ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top grid-control-column-check-box ">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>\n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="ctrl.checkBoxAllModel" ng-change="ctrl.checkBoxSelectAll()">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r                </th>\n\r                <th ng-style="{\'width\' : col.width ? col.width : \'auto\'}" class="col-lg-5 vertical-align-top" ng-repeat="col in ctrl.columns">\n\r                   <span class="margin-bottom-10 col-xs-12 no-padding "><i ng-if="col.icon" ng-class="col.icon"></i> {{ col.displayName | translate }}</span> \n\r                   <div class="input-group" ng-if="col.filter && (col.filterType && col.filterType != \'date\')">\n\r                         <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>\n\r                         <input class="form-control input-sm" type="search" ng-change="ctrl.searchData(col.filterValue)"  ng-model="col.filterValue" />\n\r                   </div>\n\r                   <div ng-if="col.filter && (col.filterType && col.filterType == \'date\')" class="input-group" ng-controller="gridControlDatePickerCtrl"><input type="text" class="form-control" show-button-bar="false" ng-change="ctrl.searchData(col.filterValue)" uib-datepicker-popup="{{format}}" ng-model="$parent.col.filterValue" is-open="opened" datepicker-options="Options" close-text="Close" />\n\r                      <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="open($event)">\n\r                          <i class="glyphicon glyphicon-calendar"></i></button></span></div>\n\r                </th>\n\r           </tr>\n\r       </thead>\n\r       <tbody>\n\r           <tr ng-repeat="row in ctrl.data" ng-class="ctrl.rowCssClass(row)">\n\r                <td ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top  grid-control-column-check-box">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>\n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="row.selected" ng-change="ctrl.checkBoxSelection(row)">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r                </td>\n\r               <td ng-repeat="col in ctrl.columns">\n\r                   <span ng-if="col.cellTemplate" gc-compile="col.cellTemplate" cell-template-scope="col.cellTemplateScope"></span>\n\r                   <span ng-if="!col.cellTemplate">{{row[col.field]}}</span>\n\r               </td>\n\r           </tr>\n\r       </tbody>\n\r   </table>\n\r   </div>\n\r   <div ng-show="ctrl.showPagination" class="text-align-center margin-top-20 pagination-greed" >\n\r         <div class="floatLeft number-pagination">\n\r             <span>{{ \'ItensPerPageLabel\' | translate }}: </span>\n\r             <select name="pageSize" id="pageSize" ng-options="option as option for option in ctrl.pageSizes" ng-model="ctrl.pagingInfo.pageSize"></select>\n\r         </div>\n\r         <uib-pagination ng-model="ctrl.pagingInfo.pageIndex" total-items="ctrl.pagingInfo.totalCount" items-per-page="ctrl.pagingInfo.pageSize" max-size="5" boundary-links="true" previous-text="{{ \'PreviousLabel\' | translate }}" next-text="{{ \'NextLabel\' | translate }}" first-text="{{ \'FirstLabel\' | translate }}" last-text="{{ \'LastLabel\' | translate }}">\n\r         </uib-pagination>\n\r   </div>\n</div>'),a.put("template/grid/simple-grid.html",'<div>\n\r   <table class="table table-striped table-bordered table-hover">\n\r       <thead>\n\r           <tr>\n\r                <th ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top grid-control-column-check-box ">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>\n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="ctrl.checkBoxAllModel" ng-change="ctrl.checkBoxSelectAll()">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r                </th>\n\r                <th ng-style="{\'width\' : col.width ? col.width : \'auto\'}" class="col-lg-5 vertical-align-top" ng-repeat="col in ctrl.columns">\n\r                   <span><i ng-if="col.icon" ng-class="col.icon"></i> {{ col.displayName | translate }}</span>\n\r                </th>\n\r           </tr>\n\r       </thead>\n\r       <tbody>\n\r           <tr ng-repeat="row in ctrl.data" ng-click="ctrl.select(row)" ng-class="ctrl.rowCssClass(row)">\n\r                <td ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top  grid-control-column-check-box">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>\n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="row.selected" ng-change="ctrl.checkBoxSelection(row)">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r                </td>\n\r               <td ng-repeat="col in ctrl.columns">\n\r                   <span ng-if="col.cellTemplate" gc-compile="col.cellTemplate" cell-template-scope="col.cellTemplateScope"></span>\n\r                   <span ng-if="!col.cellTemplate">{{row[col.field]}}</span>\n\r               </td>\n\r           </tr>\n\r       </tbody>\n\r   </table>\n</div>'),a.put("template/grid/scroll-grid.html",'<div class="table-scrollable" ng-style="{ height: ctrl.height ? ctrl.height : \'auto\' }">\n\r <div>\n\r   <table class="table table-striped table-bordered table-hover">\n\r       <thead>\n\r           <tr>\n\r                <th ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top grid-control-column-check-box ">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>                           \n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="ctrl.checkBoxAllModel" ng-change="ctrl.checkBoxSelectAll()">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r                </th>\n\r                <th ng-style="{\'width\' : col.width ? col.width : \'auto\'}" class="col-lg-5 vertical-align-top" ng-repeat="col in ctrl.columns">\n\r                   <span class="margin-bottom-10 col-xs-12 no-padding "><i ng-if="col.icon" ng-class="col.icon"></i> {{ col.displayName | translate }}</span> \n\r                </th>\n\r           </tr>\n\r       </thead>\n\r       <tbody>\n\r           <tr ng-repeat="row in ctrl.data" ng-click="ctrl.select(row)" ng-class="ctrl.rowCssClass(row)">\n\r                <td ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top  grid-control-column-check-box">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">              \n\r\t\t\t\t\t\t    <label>                           \n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="row.selected" ng-change="ctrl.checkBoxSelection(row)">     \n\r\t\t\t\t\t\t        <span class="text"></span>  \n\r\t\t\t\t\t\t    </label>                          \n\r\t\t\t\t\t\t</div>                                \n\r                </td>\n\r               <td ng-repeat="col in ctrl.columns">\n\r                   <span ng-if="col.cellTemplate" gc-compile="col.cellTemplate" cell-template-scope="col.cellTemplateScope"></span>\n\r                   <span ng-if="!col.cellTemplate">{{row[col.field]}}</span>\n\r               </td>\n\r           </tr>\n\r       </tbody>\n\r   </table>\n\r   </div>\n</div>')}]),angular.module("angular-grid-control",["template/grid"]).directive("gcCompile",["$compile",function(a){return{restrict:"EA",link:function(b,c,d){b.cellTemplateScope=b.$eval(d.cellTemplateScope),b.$watch(d.gcCompile,function(d){var e=a(d),f=e(b);c.append(f)})}}}]).directive("gcSimple",function(){return{restrict:"E",templateUrl:function(a,b){return b.templateUrl||"template/grid/simple-grid.html"},scope:{params:"=",selectedItem:"="},controller:"gridControlController",controllerAs:"ctrl",link:function(a,b,c){}}}).directive("gcPagination",["$q",function(a){return{restrict:"E",templateUrl:function(a,b){return b.templateUrl||"template/grid/pagination-grid.html"},scope:{params:"=",selectedItem:"="},controller:"gridControlController",controllerAs:"ctrl",link:function(a,b,c){}}}]).directive("gcScroll",["$q",function(a){return{restrict:"E",replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/grid/scroll-grid.html"},scope:{params:"=",selectedItem:"="},controller:"gridControlController",controllerAs:"ctrl",link:function(a,b,c){var d=b[0];b.bind("scroll",function(b){d.scrollTop+d.offsetHeight>d.scrollHeight&&!a.ctrl.gettingMore&&a.ctrl.getMore()})}}}]).controller("gridControlController",["$scope","$q","$element",function(a,b,c){var d=this;d.data=[],d.height=null,a.params.data&&(d.data=a.params.data),a.params.options&&a.params.options.height&&(d.height=a.params.options&&a.params.options.height),d.columns=a.params.columns;var e=!1;if(d.select=function(b){a.params.selection&&(d.rowSelected=b,a.$emit("gridControl:selectItem",b))},d.error=function(b){return!(!a.params.callbacks||!a.params.callbacks.error)&&a.params.callbacks.error(b)},d.warning=function(b){return!(!a.params.callbacks||!a.params.callbacks.warning)&&a.params.callbacks.warning(b)},d.searchData=function(a){e=!0,d.buildData().then(function(a){e=!1}).catch(function(a){e=!1})},d.selectedItemHandler=function(a){d.selectedItem=a},d.rowCssClass=function(b){return{danger:d.error(b),warning:d.warning(b),"cursor-pointer":a.params.selection,"grid-control-item-selected":d.isSelected(b)}},d.isSelected=function(a){return d.rowSelected==a||d.checkbox&&a.selected},a.params.update=function(){d.buildData()},d.buildData=function(){var c=b.defer();d.getData=a.params.data;var e=a.params.options&&a.params.options.async;return e?d.getData().then(function(a){d.data=a,c.resolve(a)}).catch(function(a){c.reject(a)}):(d.data=d.getData(),c.resolve(d.data)),c.promise},a.params.options&&"pagination"==a.params.options.type){d.showPagination=!0,d.getData=a.params.data,d.pageSizes=[5,10,15,20,25,30],d.pagingInfo={pageSize:d.pageSizes[0],pageIndex:1},a.$watch("ctrl.pagingInfo.pageIndex + ctrl.pagingInfo.pageSize",function(){e||(a.$emit("gridControl:beforePageChanged"),d.buildData().then(function(){a.$emit("gridControl:afterPageChanged")}),d.checkBoxAllModel=!1)});var f=function(a){d.data=a.items,d.pagingInfo=a.pagingInfo,d.showPagination=d.pagingInfo.hasNextPage||d.pagingInfo.hasPreviousPage};d.buildData=function(){var c=b.defer(),e={pagingInfo:d.pagingInfo};d.columns.forEach(function(a){a.filter&&(e[a.field]=a.filterValue)});var g=a.params.options&&a.params.options.async;if(g)d.getData(e).then(function(a){f(a),c.resolve(a)}).catch(function(a){c.reject(a)});else{var h=d.getData(e);f(h),c.resolve(h)}return c.promise}}else if(a.params.options&&"scroll"==a.params.options.type){d.height||(d.height="300px"),d.getMore=function(){d.gettingMore=!0,d.buildData().finally(function(){d.gettingMore=!1})};var g=function(a){Array.isArray(d.data)||(d.data=[]),d.data=d.data.concat(a)};d.buildData=function(){var c=b.defer();d.getData=a.params.data;var e=a.params.options&&a.params.options.async;if(e)d.getData().then(function(a){g(a),c.resolve(d.data)}).catch(function(a){c.reject(a)});else{var f=d.getData();g(f),c.resolve(d.data)}return c.promise},d.buildData()}else a.$watch("params.data",function(a){a&&(d.data=a)});a.params.options&&a.params.options.checkbox&&(d.checkbox=a.params.options.checkbox,d.checkBoxSelection=function(a){var b=d.checkBoxAllModel;if(b&&!a.selected)d.checkBoxAllModel=a.selected;else if(!b&&d.data){var c=!0;d.data.forEach(function(a){a.selected||(c=!1)}),c&&(d.checkBoxAllModel=c)}},d.checkBoxSelectAll=function(){var a=d.checkBoxAllModel;d.data&&d.data.forEach(function(b){b.selected=a})})}]).controller("gridControlDatePickerCtrl",["$scope",function(a){a.formatDate=function(a){var b=function(a){return("0"+a).slice(-2)},c=b(a.getDate()),d=b(a.getMonth()),e=a.getFullYear();return[d,c,e].join("/")},a.today=new Date,a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.format="dd/MM/yyyy",a.Options={startingDay:1}}]);
//# sourceMappingURL=angular-grid-control.min.js.map