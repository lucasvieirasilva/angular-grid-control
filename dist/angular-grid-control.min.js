"use strict";angular.module("template/grid",[]).run(["$templateCache",function(a){a.put("template/grid/pagination-grid.html",'<div>\n\r <div>\n\r   <table ng-class="ctrl.tableClass" class="table">\n\r       <thead>\n\r           <tr>\n\r                <th ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top grid-control-column-check-box ">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>\n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="ctrl.checkBoxAllModel" ng-change="ctrl.checkBoxSelectAll()">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r                </th>\n\r                <th ng-style="{\'width\' : col.width ? col.width : \'auto\'}" class="col-lg-5 vertical-align-top" ng-repeat="col in ctrl.columns">\n\r                   <span class="col-xs-12 no-padding "><i ng-if="col.icon" ng-class="col.icon"></i> {{ col.displayName | translate }}</span> \n\r                   <div class="margin-top-10 input-group" ng-if="col.filter && (col.filterType && col.filterType != \'date\')">\n\r                         <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>\n\r                         <input class="form-control input-sm" type="search" ng-change="ctrl.searchData(col.filterValue)"  ng-model="col.filterValue" />\n\r                   </div>\n\r                   <div ng-if="col.filter && (col.filterType && col.filterType == \'date\')" class="input-group" ng-controller="gridControlDatePickerCtrl"><input type="text" class="form-control" show-button-bar="false" ng-change="ctrl.searchData(col.filterValue)" uib-datepicker-popup="{{format}}" ng-model="$parent.col.filterValue" is-open="opened" datepicker-options="Options" close-text="Close" />\n\r                      <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="open($event)">\n\r                          <i class="glyphicon glyphicon-calendar"></i></button></span></div>\n\r                </th>\n\r           </tr>\n\r       </thead>\n\r       <tbody>\n\r           <tr ng-repeat="row in ctrl.data" ng-click="ctrl.select(row, $event)" ng-class="ctrl.rowCssClass(row)">\n\r                <td ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top  grid-control-column-check-box">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>\n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="row[ctrl.checkboxField]" ng-change="ctrl.checkBoxSelection(row)">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r                </td>\n\r               <td ng-repeat="col in ctrl.columns">\n\r                   <span ng-if="col.cellTemplate" gc-compile="col.cellTemplate" cell-template-scope="col.cellTemplateScope"></span>\n\r                   <span ng-if="!col.cellTemplate">{{row[col.field]}}</span>\n\r               </td>\n\r           </tr>\n\r       </tbody>\n\r   </table>\n\r   </div>\n\r   <div ng-show="ctrl.showPagination" class="grid-control-text-align-center grid-control-margin-top-20 grid-control-pagination-greed" >\n\r         <div ng-if="params.options.pagination.useItemsPerPage == true || params.options.pagination.useItemsPerPage == undefined" class="grid-control-floatLeft grid-control-number-pagination">\n\r             <span>{{ ctrl.itemsPerPageText }}: </span>\n\r             <select name="pageSize" id="pageSize" ng-options="option as option for option in ctrl.pageSizes" ng-model="ctrl[ctrl.pagingInfoProperty][ctrl.pageSizeProperty]"></select>\n\r         </div>\n\r         <ul uib-pagination ng-model="ctrl[ctrl.pagingInfoProperty][ctrl.pageIndexProperty]" total-items="ctrl[ctrl.pagingInfoProperty][ctrl.totalCountProperty]" items-per-page="ctrl[ctrl.pagingInfoProperty][ctrl.pageSizeProperty]" max-size="5" boundary-links="true" previous-text="{{ ctrl.previousText }}" next-text="{{ ctrl.nextText }}" first-text="{{ ctrl.firstText }}" last-text="{{ ctrl.lastText }}">\n\r         </ul>\n\r   </div>\n</div>'),a.put("template/grid/simple-grid.html",'<div>\n\r   <table ng-class="ctrl.tableClass" class="table">\n\r       <thead>\n\r           <tr>\n\r                <th ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top grid-control-column-check-box ">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>\n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="ctrl.checkBoxAllModel" ng-change="ctrl.checkBoxSelectAll()">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r                </th>\n\r                <th ng-style="{\'width\' : col.width ? col.width : \'auto\'}" class="col-lg-5 vertical-align-top" ng-repeat="col in ctrl.columns">\n\r                   <span><i ng-if="col.icon" ng-class="col.icon"></i> {{ col.displayName | translate }}</span>\n\r                </th>\n\r           </tr>\n\r       </thead>\n\r       <tbody>\n\r           <tr ng-repeat="row in ctrl.data" ng-click="ctrl.select(row, $event)" ng-class="ctrl.rowCssClass(row)">\n\r                <td ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top  grid-control-column-check-box">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>\n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="row[ctrl.checkboxField]" ng-change="ctrl.checkBoxSelection(row)">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r                </td>\n\r               <td ng-repeat="col in ctrl.columns">\n\r                   <span ng-if="col.cellTemplate" gc-compile="col.cellTemplate" cell-template-scope="col.cellTemplateScope"></span>\n\r                   <span ng-if="!col.cellTemplate">{{row[col.field]}}</span>\n\r               </td>\n\r           </tr>\n\r       </tbody>\n\r   </table>\n</div>'),a.put("template/grid/scroll-grid.html",'<div class="table-scrollable" ng-style="{ height: ctrl.height ? ctrl.height : \'auto\' }">\n\r <div>\n\r   <table ng-class="ctrl.tableClass"  class="table">\n\r       <thead>\n\r           <tr>\n\r                <th ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top grid-control-column-check-box ">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>                           \n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="ctrl.checkBoxAllModel" ng-change="ctrl.checkBoxSelectAll()">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r                </th>\n\r                <th ng-style="{\'width\' : col.width ? col.width : \'auto\'}" class="col-lg-5 vertical-align-top" ng-repeat="col in ctrl.columns">\n\r                   <span class="margin-bottom-10 col-xs-12 no-padding "><i ng-if="col.icon" ng-class="col.icon"></i> {{ col.displayName | translate }}</span> \n\r                </th>\n\r           </tr>\n\r       </thead>\n\r       <tbody>\n\r           <tr ng-repeat="row in ctrl.data" ng-click="ctrl.select(row, $event)" ng-class="ctrl.rowCssClass(row)">\n\r                <td ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top  grid-control-column-check-box">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">              \n\r\t\t\t\t\t\t    <label>                           \n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="row[ctrl.checkboxField]" ng-change="ctrl.checkBoxSelection(row)">     \n\r\t\t\t\t\t\t        <span class="text"></span>  \n\r\t\t\t\t\t\t    </label>                          \n\r\t\t\t\t\t\t</div>                                \n\r                </td>\n\r               <td ng-repeat="col in ctrl.columns">\n\r                   <span ng-if="col.cellTemplate" gc-compile="col.cellTemplate" cell-template-scope="col.cellTemplateScope"></span>\n\r                   <span ng-if="!col.cellTemplate">{{row[col.field]}}</span>\n\r               </td>\n\r           </tr>\n\r       </tbody>\n\r   </table>\n\r   </div>\n</div>'),a.put("template/grid/vs-simple-grid.html",'<div class="vs-table-scroll">\n\r   <table ng-class="ctrl.tableClass" class="table">\n\r       <thead>\n\r           <tr>\n\r                <th ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top grid-control-column-check-box">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>\n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="ctrl.checkBoxAllModel" ng-change="ctrl.checkBoxSelectAll()">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r                </th>\n\r                <th ng-style="{\'width\' : col.width ? col.width : \'auto\'}" class="col-lg-5 vertical-align-top" ng-repeat="col in ctrl.columns">\n\r                   <span><i ng-if="col.icon" ng-class="col.icon"></i> {{ col.displayName | translate }}</span>\n\r                </th>\n\r           </tr>\n\r       </thead>\n\r       <tbody vs-repeat vs-scroll-parent=".vs-table-scroll">\n\r           <tr ng-repeat="row in ctrl.data" ng-click="ctrl.select(row, $event)" ng-class="ctrl.rowCssClass(row)">\n\r                <td ng-if="ctrl.checkbox" class="col-lg-5 vertical-align-top grid-control-column-check-box">\n\r\t\t\t\t\t\t<div class="checkbox grid-control-no-margin">\n\r\t\t\t\t\t\t    <label>\n\r\t\t\t\t\t\t        <input type="checkbox" class="colored-blue" ng-model="row[ctrl.checkboxField]" ng-change="ctrl.checkBoxSelection(row)">\n\r\t\t\t\t\t\t        <span class="text"></span>\n\r\t\t\t\t\t\t    </label>\n\r\t\t\t\t\t\t</div>\n\r               </td>\n\r               <td ng-repeat="col in ctrl.columns">\n\r                   <span ng-if="col.cellTemplate" gc-compile="col.cellTemplate" cell-template-scope="col.cellTemplateScope"></span>\n\r                   <span ng-if="!col.cellTemplate">{{row[col.field]}}</span>\n\r               </td>\n\r           </tr>\n\r       </tbody>\n\r   </table>\n</div>')}]);var gcSimpleLink=function(a,b,c){a.params.multipleSelection&&(b.attr("tabIndex",0),b.bind("keyup",function(b){return b.ctrlKey&&65==b.keyCode&&a.ctrl.selectAll(),b.preventDefault(),!1}),b.bind("keydown",function(a){if(a.ctrlKey)return a.preventDefault(),!1}))};angular.module("angular-grid-control",["template/grid"]).directive("gcCompile",["$compile",function(a){return{restrict:"EA",link:function(b,c,d){b.cellTemplateScope=b.$eval(d.cellTemplateScope),b.$watch(d.gcCompile,function(d){var e=a(d),f=e(b);c.append(f)})}}}]).directive("gcSimple",function(){return{restrict:"E",templateUrl:function(a,b){return b.templateUrl||"template/grid/simple-grid.html"},scope:{params:"=",selectedItem:"=",onSelect:"="},controller:"gridControlController",controllerAs:"ctrl",link:gcSimpleLink}}).directive("gcVsSimple",function(){return{restrict:"E",templateUrl:function(a,b){return b.templateUrl||"template/grid/vs-simple-grid.html"},scope:{params:"=",selectedItem:"=",onSelect:"="},controller:"gridControlController",controllerAs:"ctrl",link:gcSimpleLink}}).directive("gcPagination",["$q",function(a){return{restrict:"E",templateUrl:function(a,b){return b.templateUrl||"template/grid/pagination-grid.html"},scope:{params:"=",selectedItem:"=",onSelect:"="},controller:"gridControlController",controllerAs:"ctrl",link:function(a,b,c){}}}]).directive("gcScroll",["$q",function(a){return{restrict:"E",replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/grid/scroll-grid.html"},scope:{params:"=",selectedItem:"=",onSelect:"="},controller:"gridControlController",controllerAs:"ctrl",link:function(a,b,c){var d=b[0];b.bind("scroll",function(b){d.scrollTop+d.offsetHeight>d.scrollHeight&&!a.ctrl.gettingMore&&a.ctrl.getMore()})}}}]).controller("gridControlController",["$scope","$q","$element","$timeout",function(a,b,c,d){var e=this;a.safeApply=function(a){var b=this.$root.$$phase;"$apply"==b||"$digest"==b?a&&"function"==typeof a&&a():this.$apply(a)},e.data=[],e.height=null,e.tableClass="table-striped table-bordered table-hover",e.selectedRows=[],a.multipleSelected=!1,e.selectAll=function(){e.selectRows(void 0)},e.deselectAll=function(){e.deselectRows(void 0)},a.params.data&&(e.data=a.params.data),a.params.options&&a.params.options.tableClass&&(e.tableClass=a.params.options.tableClass),a.params.options&&a.params.options.height&&(e.height=a.params.options&&a.params.options.height),e.columns=a.params.columns;var f=!1,g=!1;if(e.select=function(b,c){a.params.selection&&!c.ctrlKey&&(a.params.selectedItem=b,a.$emit("gridControl:selectItem",b),e.deselectAll(),a.onSelect instanceof Function&&a.onSelect(b),a.params.events&&a.params.events.onSelectItem instanceof Function&&a.params.events.onSelectItem(b)),a.params.multipleSelection&&c.ctrlKey&&(a.params.selectedItem&&e.selectedRows.indexOf(a.params.selectedItem)==-1?e.selectedRows.push(a.params.selectedItem):angular.equals(a.params.selectedItem,b)&&(a.params.selectedItem=void 0),e.selectedRows&&e.selectedRows.indexOf(b)>=0?e.selectedRows.length>1&&e.deselectRows(b):e.selectRows(b))},e.selectRows=function(b){a.multipleSelected=!0,b?e.selectedRows.push(b):e.selectedRows=e.data.concat([]),a.params.events&&a.params.events.onMultipleSelectItem instanceof Function&&a.params.events.onMultipleSelectItem(e.selectedRows)},e.deselectRows=function(b){b?e.selectedRows.splice(e.selectedRows.indexOf(b),1):(e.selectedRows=[],a.multipleSelected=!1),a.params.events&&a.params.events.onMultipleSelectItem instanceof Function&&(e.selectedRows&&e.selectedRows.length>0?a.params.events.onMultipleSelectItem(e.selectedRows):a.params.events.onMultipleSelectItem(void 0))},e.error=function(b){return!(!a.params.callbacks||!a.params.callbacks.error)&&a.params.callbacks.error(b)},e.warning=function(b){return!(!a.params.callbacks||!a.params.callbacks.warning)&&a.params.callbacks.warning(b)},e.searchData=function(a){f=!0,e.buildData(!0).then(function(a){f=!1}).catch(function(a){f=!1})},e.rowCssClass=function(b){return{danger:e.error(b),warning:e.warning(b),"cursor-pointer":a.params.selection,"grid-control-item-selected":e.isSelected(b),"grid-control-multiple-selected":e.IsMultipleSelected(b)}},e.isSelected=function(b){return a.params.selectedItem==b},a.params.update=function(a){e.buildData(a)},e.IsMultipleSelected=function(b){return a.multipleSelected&&e.selectedRows.indexOf(b)>=0},e.buildData=function(){var c=b.defer();e.getData=a.params.data;var d=a.params.options&&a.params.options.async;return d?e.getData().then(function(a){e.data=a,c.resolve(a)}).catch(function(a){c.reject(a)}):(e.data=e.getData(),c.resolve(e.data)),c.promise},a.params.options&&"pagination"==a.params.options.type){e.itemsPerPageText="Items per page",e.previousText="Previous",e.nextText="Next",e.lastText="Last",e.firstText="First",e.pagingInfoProperty="pagingInfo",e.pageSizeProperty="pageSize",e.pageIndexProperty="pageIndex",e.totalCountProperty="totalCount",e.hasNextPageProperty="hasNextPage",e.hasPreviousPageProperty="hasPreviousPage",e.itemsProperty="items",a.params.options&&a.params.options.pagination&&(a.params.options.pagination.itemsPerPageText&&(e.itemsPerPageText=a.params.options.pagination.itemsPerPageText),a.params.options.pagination.firstText&&(e.firstText=a.params.options.pagination.firstText),a.params.options.pagination.lastText&&(e.lastText=a.params.options.pagination.lastText),a.params.options.pagination.nextText&&(e.nextText=a.params.options.pagination.nextText),a.params.options.pagination.previousText&&(e.previousText=a.params.options.pagination.previousText),a.params.options.pagination.pagingInfoProperty&&(e.pagingInfoProperty=a.params.options.pagination.pagingInfoProperty),a.params.options.pagination.pageSizeProperty&&(e.pageSizeProperty=a.params.options.pagination.pageSizeProperty),a.params.options.pagination.pageIndexProperty&&(e.pageIndexProperty=a.params.options.pagination.pageIndexProperty),a.params.options.pagination.totalCountProperty&&(e.totalCountProperty=a.params.options.pagination.totalCountProperty),a.params.options.pagination.hasPreviousPageProperty&&(e.hasPreviousPageProperty=a.params.options.pagination.hasPreviousPageProperty),a.params.options.pagination.hasNextPageProperty&&(e.hasNextPageProperty=a.params.options.pagination.hasNextPageProperty),a.params.options.pagination.itemsProperty&&(e.itemsProperty=a.params.options.pagination.itemsProperty)),e.showPagination=!0,e.getData=a.params.data,e.pageSizes=[5,10,15,20,25,30,50,100],e[e.pagingInfoProperty]={},e[e.pagingInfoProperty][e.pageIndexProperty]=1,a.params.options&&a.params.options.pagination&&a.params.options.pagination.pageSize?e[e.pagingInfoProperty][e.pageSizeProperty]=a.params.options.pagination.pageSize:a.params.options&&(!a.params.options.pagination||a.params.options.pagination&&!a.params.options.pagination.useItemsPerPage)&&(e[e.pagingInfoProperty][e.pageSizeProperty]=e.pageSizes[0]),a.$watch("ctrl[ctrl.pagingInfoProperty][ctrl.pageIndexProperty] + ctrl[ctrl.pagingInfoProperty][ctrl.pageSizeProperty]",function(){return g?void(g=!1):void(f||(a.$emit("gridControl:beforePageChanged"),e.buildData().then(function(){a.$emit("gridControl:afterPageChanged")})))});var h=function(a){a[e.pagingInfoProperty][e.pageIndexProperty]+=1,e.data=a[e.itemsProperty],e[e.pagingInfoProperty]=a[e.pagingInfoProperty],e.showPagination=e[e.pagingInfoProperty][e.hasNextPageProperty]||e[e.pagingInfoProperty][e.hasPreviousPageProperty]};e.buildData=function(c){var d=b.defer(),f={};f[e.pagingInfoProperty]=angular.copy(e[e.pagingInfoProperty]),f[e.pagingInfoProperty][e.pageIndexProperty]-=1;var i=!1;e.columns.forEach(function(a){a.filter&&(a.filterValue&&(i=!0),f[a.field]=a.filterValue)}),c===!0&&i&&(g=0!=f[e.pagingInfoProperty][e.pageIndexProperty],f[e.pagingInfoProperty][e.pageIndexProperty]=0),e.checkBoxAllModel=!1;var j=a.params.options&&a.params.options.async;if(j)e.getData(f).then(function(b){h(b),a.params.currentData=e.data,d.resolve(b)}).catch(function(a){d.reject(a)});else{var k=e.getData(f);h(k),d.resolve(k)}return d.promise}}else if(a.params.options&&"scroll"==a.params.options.type){e.height||(e.height="300px"),e.getMore=function(){e.gettingMore=!0,e.buildData().finally(function(){e.gettingMore=!1})};var i=function(a){Array.isArray(e.data)||(e.data=[]),e.data=e.data.concat(a)};e.buildData=function(){var c=b.defer();e.getData=a.params.data;var d=a.params.options&&a.params.options.async;if(d)e.getData().then(function(a){i(a),c.resolve(e.data)}).catch(function(a){c.reject(a)});else{var f=e.getData();i(f),c.resolve(e.data)}return c.promise},e.buildData()}else a.$watch("params.data",function(a){a&&(e.data=a)});a.params.options&&a.params.options.checkbox&&(e.checkboxField=a.params.options.checkboxField,e.checkboxField||(e.checkboxField="selected"),e.checkbox=a.params.options.checkbox,e.checkBoxSelection=function(a){var b=e.checkBoxAllModel;if(b&&!a[e.checkboxField])e.checkBoxAllModel=a[e.checkboxField];else if(!b&&e.data){var c=!0;e.data.forEach(function(a){a[e.checkboxField]||(c=!1)}),c&&(e.checkBoxAllModel=c)}},e.checkBoxSelectAll=function(){var a=e.checkBoxAllModel;e.data&&e.data.forEach(function(b){b[e.checkboxField]=a})})}]).controller("gridControlDatePickerCtrl",["$scope",function(a){a.formatDate=function(a){var b=function(a){return("0"+a).slice(-2)},c=b(a.getDate()),d=b(a.getMonth()),e=a.getFullYear();return[d,c,e].join("/")},a.today=new Date,a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.format="dd/MM/yyyy",a.Options={startingDay:1}}]);
//# sourceMappingURL=angular-grid-control.min.js.map